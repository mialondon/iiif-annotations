<h1>iiif-annotations</h1>
<p>A proof-of-concept, annotating a IIIF manifest with Zooniverse classification data.</p>
<p>Run it locally with</p>
<pre><code>npm install
npx eleventy --serve
</code></pre>
<p>Or browse work in progress at</p>
<ul>
<li>https://zooniverse.github.io/iiif-annotations/annotations/dates.json (individual dates entered by volunteers.)</li>
<li>https://zooniverse.github.io/iiif-annotations/annotations/titles.json (individual titles and rectangles drawn by volunteers.)</li>
<li>https://zooniverse.github.io/iiif-annotations/annotations/consensusDates.json (consensus dates, one per playbill.)</li>
</ul>
<h2>How it works</h2>
<p>Builds are run by <a href="https://1ty.dev">Eleventy</a> and managed by GitHub Actions. Merging a change to the data files in the <code>_data</code> directory will build a new collection of JSON files.</p>
<p><code>_data</code> contains the source data files:</p>
<ul>
<li><code>config.json</code>: the URL of the source manifest, and the dimensions of the Zooniverse images, which are needed to scale annotations back up to the original canvas.</li>
<li><code>consensusDates.csv</code>: CSV output from the Caesar text reducer for the Dates workflow.</li>
<li><code>dates.csv</code>: a workflow classifications export for the Dates workflow, stripped of volunteers' personal data.</li>
<li><code>titles.csv</code>: a workflow classifications export for the Titles workflow, stripped of volunteers' personal data.</li>
</ul>
<p>Output templates are in the <code>annotations</code> directory:</p>
<ul>
<li><code>annotations/consensusDates</code>
<ul>
<li><code>index.11ty.js</code>: publishes an <a href="https://iiif.io/api/presentation/3.0/#58-annotation-collection">annotation collection</a> at <code>/annotations/consensusDates.json</code></li>
<li><code>dates.11tydata.js</code>: parse the CSV text annotations into an array of date annotations, with IDs.</li>
<li><code>dates.11ty.js</code>: loops over the default sequence of canvases in the manifest (<code>manifest.sequences[0].canvases</code>), printing out a JSON <a href="https://iiif.io/api/presentation/3.0/#55-annotation-page"><code>AnnotationPage</code></a> with one date annotation item for each canvas.</li>
</ul>
</li>
<li><code>annotations/dates</code>
<ul>
<li><code>index.11ty.js</code>: publishes an <a href="https://iiif.io/api/presentation/3.0/#58-annotation-collection">annotation collection</a> at <code>/annotations/dates.json</code></li>
<li><code>dates.11tydata.js</code>: parse the CSV classifications into an array of date annotations, with IDs.</li>
<li><code>dates.11ty.js</code>: loops over the default sequence of canvases in the manifest (<code>manifest.sequences[0].canvases</code>), printing out a JSON <a href="https://iiif.io/api/presentation/3.0/#55-annotation-page"><code>AnnotationPage</code></a> with date annotation items for each canvas.</li>
</ul>
</li>
<li><code>annotations/titles</code>
<ul>
<li><code>index.11ty.js</code>: publishes an <a href="https://iiif.io/api/presentation/3.0/#58-annotation-collection">annotation collection</a> at <code>/annotations/titles.json</code></li>
<li><code>titles.11tydata.js</code>: parse the CSV classifications into an array of title annotations, with IDs. Each classification contains multiple drawings, so the final result is flattened into a single array of performance titles.</li>
<li><code>titles.11ty.js</code>: loops over the default sequence of canvases in the manifest (<code>manifest.sequences[0].canvases</code>), printing out a JSON <a href="https://iiif.io/api/presentation/3.0/#55-annotation-page"><code>AnnotationPage</code></a> with title annotation items for each canvas.</li>
</ul>
</li>
</ul>
